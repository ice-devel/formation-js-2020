<!DOCTYPE html>
<html>
	<head>
		<title>jQuery</title>
		<style>
		</style>
	</head>

	<body>
		<h1 id="mon-element" style="">ECMA Script</h1>
		<ul>
			<li>Au départ ça devait être livescript, netscape a changé au dernier pour javascript</li>
			<li>ECMAScript : spécifications</li>
			<li>Javascript est basé sur ces spécs, JS est une implémentation </li>
			<li>ES1 (1997), ES4 (RIP), ES5, ES6 (2015), ES11 (2020)</li>
			<li>JS est orienté prototype</li>
		</ul>
	
		<script>
			// Nouveautés ES5
			// constante
			
			// vérifier si une variable de type tableau
			var test = [1, 2, 3];
			Array.isArray(test); // return true
			Array.isArray("coucou"); // return false
			
			// afficher un tableau : for, apparition de foreach
			var firstnames = ['toto', 'biloute'];
			firstnames.forEach(function(element, index) {
				console.log(element);
				console.log(index);
			});
			
			// map, filter, reduce, every, some, indexOf
			
			// date
			Date.now(); // nb de ms depuis 1970
			
			
			// ES6
			const a = 10;
			
			// let portée de bloc
			var b;
			if (1 == 1) {
				let b = "let et const n'existaient pas avant ES6";
			}
			
			// for of : alterlative foreach
			var ages = [10, 14, 25];
			for (const age of ages) {
				console.log(age);
			}
			
			// paramètres facultatifs de fonction JS
			// avant 
			function sayHello(upper) {
				// mettre une valeur par défaut
				if (typeof upper == "undefined")  upper = true;
				
				if (upper) {
					alert ('HELLO');
				}
				else {
					alert('hello');
				}
			}
			
			// après
			function sayHello(upper=true) {
				if (upper) {
					alert ('HELLO');
				}
				else {
					alert('hello');
				}
			}
			
			// fonctions fléchées
			// avant
			var maFct = function(nb1) {
				return nb1 + 10;
			};
			
			// après
			var maFct = (nb1, nb2) => { var sum = nb1+nb2; return sum; };
			var maFct = nb1 => nb1 + 10;
			console.log(maFct(13));
			
			// préface à l'objet (attention ces termes sont personnels)
			var objetLitteral = {
				prop1: "toto",
				fct: function() {}
			}	

			// avant : ceci est une "classe"
			function Player(name, points) {
				this.name = name;
				this.points = points;
				this.play = function() {
					console.log(this.name + " is playing");
				}
			}
			
			// player1 est une instance de la classe Player
			var player1 = new Player("toto", 100);
			console.log(player1);
			console.log(player1.name);
			console.log(player1.points);
			player1.name = "toto2";
			player1.play();
			
			// après 
			class Player2 {
				constructor(name, points) {
					this.name = name;
					this.points = points;
				}
				
				play() {
					console.log(this.name + " is playing");
				}
			}
			var playerTest = new Player2("hulk", 100);
			console.log(playerTest.name);
			playerTest.play();
		</script>
	</body>
</html>